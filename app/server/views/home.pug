extends layout

block title
    title Hackernews clone - Node.js

block styles
    link(rel='stylesheet', href='/css/home.css')

block content
    section#wrapper.container-fluid
        header.container-fluid
            div#logo
                a(href="/?query=&sort=&prefix=&dateRange=&type=&page=1")
                    img(src="https://hn.algolia.com/assets/logo-hn-search.png")
            div
                table
                    tr
                        td Bisvarup
                    tr
                        td Hacker News
            div#search 
                i.fa.fa-search.icon
                input(type="text", name="", placeholder="Search")
        article#content
            .container-fluid
                each hit in hits
                    div.news 
                        h1 
                            a(href=hit.url ,target="_blank")= hit.title || hit.story_text || 'No title'
                        div
                            span= hit.points + " points |"
                            span= hit.author + " | "
                            span= hit.created_at_i + " ago | "
                            span= hit.num_comments + " comment | "
                            span= " (" + hit.url ? hit.url : '#' + ")"
        footer
            
            br
            
            -var lower_limit = (parseInt((page - 1)/pageButtonCount) * pageButtonCount) + 1
            -var upper_limit = lower_limit * pageButtonCount;
            -var paginationNo = lower_limit - 1

            if count >= recordsPerPage
                nav(aria-label='...', style='text-align: center')
                    ul.pagination
                        -if (lower_limit > 1)
                            li.page-item 
                                -var pageUrl =  base_url + (lower_limit - pageButtonCount);
                                a.page-link(href=pageUrl, tabindex='-1') Previous
                        -else
                            li.page-item.disabled
                                a.page-link(href='#', tabindex='-1') Previous
                        -for (i = 1; i < pageButtonCount + 1; i++)

                            -if (count > (recordsPerPage * paginationNo))
                                -paginationNo = paginationNo + 1
                                -var pageUrl =  base_url  + paginationNo; /*[MODIFY THIS TO SUIT YOUR USAGE]*/
                                    -if (page != paginationNo)
                                        li.page-item
                                            a.page-link(href=pageUrl) #{paginationNo}
                                    -else
                                        li.page-item.active
                                            a.page-link(href='#')
                                                | #{paginationNo}
                                                span.sr-only (current)
                        - if (count > (recordsPerPage * upper_limit))
                            -var pageUrl = base_url  + (upper_limit + 1) /*[MODIFY THIS TO SUIT YOUR USAGE]*/
                            li.page-item
                                a.page-link(href=pageUrl) Next
                        -else
                            li.page-item.disabled
                                a.page-link(href='#', tabindex='-1') Next